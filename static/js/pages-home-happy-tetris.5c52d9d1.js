(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-happy-tetris"],{"1def":function(t,e,i){"use strict";i.r(e);var n=i("acaf"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"246e":function(t,e,i){"use strict";var n=i("5ad5"),o=i.n(n);o.a},"5ad5":function(t,e,i){var n=i("7312");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("1ac37e34",n,!0,{sourceMap:!1,shadowMode:!1})},"721d":function(t,e,i){"use strict";i.r(e);var n=i("805b"),o=i("1def");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("246e");var s,r=i("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"559eb345",null,!1,n["a"],s);e["default"]=c.exports},7312:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* mixin */\n/* 颜色变量 */body[data-v-559eb345], html[data-v-559eb345]{width:100%;height:auto}\n/* 单行文字隐藏 */.elp[data-v-559eb345]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block}\n/* 按钮置灰 */.disabled[data-v-559eb345]{opacity:.3;-webkit-filter:grayscale(100%);filter:grayscale(100%)}\n/* u-search icon 搜索兼容 */[type=search][data-v-559eb345]::-webkit-search-decoration{display:none}@font-face{font-family:xy;src:url(https://schbrain-static-online.oss-cn-hangzhou.aliyuncs.com/resources/xy.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:geetype;src:url(https://schbrain-static-online.oss-cn-hangzhou.aliyuncs.com/resources/geetype.ttf) format("truetype");font-weight:700;font-style:normal}[data-v-559eb345] .deep-class .uni-picker-container{z-index:100000!important}.tetris[data-v-559eb345]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%}.tetris-title[data-v-559eb345]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;padding:5% 5px;background-color:#cec1b3;color:#776e65;height:58px}.blockMinMap[data-v-559eb345]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;width:48px;height:48px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.blockMinMap .line[data-v-559eb345], .gameView .line[data-v-559eb345]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.blockMinMap .line uni-view[data-v-559eb345]{width:12px;height:12px}.gameView .line uni-view[data-v-559eb345]{border:1px solid #cec1b3;width:%?40?%;height:%?40?%}.blockMinMap .line .block[data-v-559eb345]{border:1px solid #fff5e4;background-color:#fad434;width:10px;height:10px}.gameView .line .block[data-v-559eb345]{border:1px solid #fff5e4;background-color:#fad434\n  /* width: 40upx;\n  height: 40upx; */}.gameView[data-v-559eb345]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.btn[data-v-559eb345]{width:100%;max-width:%?1000?%;position:fixed;bottom:0;left:50%;-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0);padding:%?20?% 0;background-color:#cec1b3;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.btn-box[data-v-559eb345]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;height:100%}.btn-box-left[data-v-559eb345]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.btn-box-left uni-view[data-v-559eb345]{font-size:%?100?%;font-weight:bolder}.btn-left[data-v-559eb345]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.btn-left uni-view[data-v-559eb345]{font-size:%?100?%;font-weight:bolder;color:#fad434}.btn-right[data-v-559eb345]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.btn-right-box[data-v-559eb345]{width:%?180?%;height:%?180?%;border-radius:50%;background:#fff5e4;position:relative}.btn-right-box .icon[data-v-559eb345]{position:absolute;color:#fad434}.btn-right-box .icon[data-v-559eb345]:active{opacity:.6}.btn-right-box .icon[data-v-559eb345]:nth-child(1){top:%?16?%;left:50%;-webkit-transform:translateX(-50%) rotate(-90deg);transform:translateX(-50%) rotate(-90deg)}.btn-right-box .icon[data-v-559eb345]:nth-child(2){top:50%;right:%?16?%;-webkit-transform:translateY(-50%) rotate(0deg);transform:translateY(-50%) rotate(0deg)}.btn-right-box .icon[data-v-559eb345]:nth-child(3){bottom:%?16?%;left:50%;-webkit-transform:translateX(-50%) rotate(90deg);transform:translateX(-50%) rotate(90deg)}.btn-right-box .icon[data-v-559eb345]:nth-child(4){top:50%;left:%?16?%;-webkit-transform:translateY(-50%) rotate(-180deg);transform:translateY(-50%) rotate(-180deg)}.btn-right[data-v-559eb345]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.over[data-v-559eb345]{position:fixed;top:0;left:0;bottom:0;right:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background:rgba(238,228,218,.73);z-index:1000;color:#8f7a66}.over p[data-v-559eb345]{font-size:%?60?%;font-weight:700;margin-bottom:%?30?%}.over span[data-v-559eb345]{margin-bottom:%?20?%}.over-btn[data-v-559eb345]{padding:%?20?%;border-radius:%?10?%;cursor:pointer;text-align:center;color:#f9f6f2;background:#8f7a66}',""]),t.exports=e},"805b":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uIcon:i("f86b").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"tetris"},[i("v-uni-view",{staticClass:"tetris-title"},[i("v-uni-view",[t._v("分数："+t._s(t.score[0]))]),i("v-uni-view",{staticClass:"blockMinMap"},t._l(t.blocks[t.nextBlock[0]][t.nextBlock[1]],(function(e,n){return i("v-uni-view",{key:"minimap-line-"+n,staticClass:"line"},t._l(e,(function(t,e){return i("v-uni-view",{key:"minimap-line-"+n+"-block-"+e,class:{block:1==t}})})),1)})),1),i("v-uni-view",[t._v("等级："+t._s(parseInt(t.score[0]/t.score[1])))])],1),i("v-uni-view",{staticClass:"gameView",style:{height:t.gameViewHeight+"px"}},t._l(t.getTrueMap(),(function(e,n){return i("v-uni-view",{key:"map-line-"+n,staticClass:"line"},t._l(e,(function(e,o){return i("v-uni-view",{key:"map-line-"+n+"-block-"+o,class:{block:e>0},style:{width:t.getGameViewBlockSize()+"px",height:t.getGameViewBlockSize()+"px"}})})),1)})),1),i("v-uni-view",{staticClass:"btn deep-class",attrs:{id:"buttonView"}},[i("v-uni-view",{staticClass:"btn-left"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.rotateBlock()}}},[t._v("〇")])],1),i("v-uni-view",{staticClass:"btn-right"},[i("v-uni-view",{staticClass:"btn-right-box"},[i("v-uni-view",{staticClass:"icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.rotateBlock()}}},[i("u-icon",{attrs:{name:"play-circle-fill",size:"48"}})],1),i("v-uni-view",{staticClass:"icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moveRight()}}},[i("u-icon",{attrs:{name:"play-circle-fill",size:"48"}})],1),i("v-uni-view",{staticClass:"icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moveDown()}}},[i("u-icon",{attrs:{name:"play-circle-fill",size:"48"}})],1),i("v-uni-view",{staticClass:"icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.moveLeft()}}},[i("u-icon",{attrs:{name:"play-circle-fill",size:"48"}})],1)],1)],1)],1),t.gameOver?i("v-uni-view",{staticClass:"over"},[i("p",[t._v("Game over!")]),i("span",[t._v("分数: "+t._s(t.score[0]))]),i("v-uni-view",{staticClass:"over-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.initGame.apply(void 0,arguments)}}},[t._v("再来一次")])],1):t._e()],1)},a=[]},acaf:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("e25e"),i("d81d");var n={data:function(){return{mapSize:[18,10],downSpeed:[1500,200,100],score:[0,10,1],map:[],blocks:[[[[0,1,1],[1,1,0]],[[1,0],[1,1],[0,1]]],[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]],[[[1,1,1,1]],[[1],[1],[1],[1]]],[[[1,1],[1,1]]],[[[0,1,0],[1,1,1]],[[0,1],[1,1],[0,1]],[[1,1,1],[0,1,0]],[[1,0],[1,1],[1,0]]],[[[0,0,1],[1,1,1]],[[1,1],[0,1],[0,1]],[[1,1,1],[1,0,0]],[[1,0],[1,0],[1,1]]],[[[1,0,0],[1,1,1]],[[0,1],[0,1],[1,1]],[[1,1,1],[0,0,1]],[[1,1],[1,0],[1,0]]]],startPosition:[0,4],blockPosition:[0,0],nowBlock:[0,0],nextBlock:[0,0],gameViewHeight:450,gameOver:!1,gameUpdateFunc:null}},mounted:function(){this.refreshNextBlock(),this.refreshNextBlock()},destroyed:function(){clearInterval(this.gameUpdateFunc)},onLoad:function(){this.initGame()},methods:{initGame:function(){var t=this;this.initMap(),this.score[0]=0,this.refreshNextBlock(),this.refreshNextBlock(),this.gameOver=!1,clearInterval(this.gameUpdateFunc),this.gameUpdateFunc=null,this.$nextTick((function(){t.tryGetGameHeight(),t.gameUpdate()}))},gameUpdate:function(){var t=this;this.gameOver=!1,this.gameUpdateFunc=setInterval((function(){t.moveDown(),clearInterval(t.gameUpdateFunc),t.gameOver?t.gameOver=!0:t.gameUpdate()}),Math.max(this.downSpeed[0]-this.downSpeed[2]*parseInt(this.score[0]/this.score[1]),this.downSpeed[1]))},moveDown:function(){if(!this.gameOver){for(var t=[],e=this.blocks[this.nowBlock[0]][this.nowBlock[1]],i=0;i<e[0].length;i++)t.push(0);for(var n=0;n<e.length;n++)for(var o=0;o<e[n].length;o++)e[n][o]>0&&(t[o]=Math.max(t[o],n));for(var a=!0,s=0;s<t.length;s++){if(this.blockPosition[0]+t[s]+1>=this.mapSize[0]){a=!1;break}if(this.map[this.blockPosition[0]+t[s]+1][this.blockPosition[1]+s]>0){a=!1;break}}if(a)this.blockPosition[0]+=1,this.$forceUpdate();else if(this.blockPosition[0]<=0)this.gameOver=!0;else{for(var r=0;r<e.length;r++)for(var c=0;c<e[r].length;c++)this.map[this.blockPosition[0]+r][this.blockPosition[1]+c]=Math.max(e[r][c],this.map[this.blockPosition[0]+r][this.blockPosition[1]+c]);this.$forceUpdate(),this.checkMapScore(),this.refreshNextBlock()}}},rotateBlock:function(){if(!this.gameOver){var t=(this.nowBlock[1]+1)%this.blocks[this.nowBlock[0]].length,e=!0,i=this.blocks[this.nowBlock[0]][t];if(this.blockPosition[1]+i[0].length>this.mapSize[1])e=!1;else if(this.blockPosition[0]+i.length>this.mapSize[0])e=!1;else for(var n=0;n<i.length;n++)for(var o=0;o<i[n].length;o++)if(i[n][o]>0&&this.map[this.blockPosition[0]+n][this.blockPosition[1]+o]>0){e=!1;break}e&&(this.nowBlock[1]=t,this.$forceUpdate())}},moveLeft:function(){if(!this.gameOver){for(var t=this.blocks[this.nowBlock[0]][this.nowBlock[1]],e=[],i=0;i<t.length;i++){e.push(-1);for(var n=0;n<t[i].length;n++)-1===e[i]&&t[i][n]>0&&(e[i]=n)}for(var o=!0,a=0;a<e.length;a++){if(this.blockPosition[1]+e[a]===0){o=!1;break}if(this.map[this.blockPosition[0]+a][this.blockPosition[1]+e[a]-1]>0){o=!1;break}}o&&(this.blockPosition[1]-=1,this.$forceUpdate())}},moveRight:function(){if(!this.gameOver){for(var t=this.blocks[this.nowBlock[0]][this.nowBlock[1]],e=[],i=0;i<t.length;i++){e.push(0);for(var n=0;n<t[i].length;n++)t[i][n]>0&&(e[i]=n)}for(var o=!0,a=0;a<e.length;a++){if(this.blockPosition[1]+e[a]+1>=this.mapSize[1]){o=!1;break}if(this.map[this.blockPosition[0]+a][this.blockPosition[1]+e[a]+1]>0){o=!1;break}}o&&(this.blockPosition[1]+=1,this.$forceUpdate())}},checkMapScore:function(){for(var t=[],e=0;e<this.map.length;e++){for(var i=0,n=0;n<this.map[e].length;n++)i+=Math.min(this.map[e][n],1);i>=this.map[e].length?this.score[0]+=this.score[2]:t.push(JSON.parse(JSON.stringify(this.map[e])))}while(t.length<this.map.length){for(var o=[],a=0;a<this.map[0].length;a++)o.push(0);t.unshift(o)}this.map=t,this.$forceUpdate()},initMap:function(){this.map=[];for(var t=0;t<this.mapSize[0];t++){this.map.push([]);for(var e=0;e<this.mapSize[1];e++)this.map[t].push(0)}},tryGetGameHeight:function(){var t=this;this.$nextTick((function(){t.gameViewHeight=uni.getSystemInfoSync().windowHeight-170}))},getGameViewBlockSize:function(){var t=40;return Math.min(parseInt((this.gameViewHeight-t)/this.mapSize[0]),parseInt((uni.getSystemInfoSync().windowWidth-t)/this.mapSize[1]))},refreshNextBlock:function(){this.nowBlock=this.nextBlock;var t=[parseInt(Math.random()*this.blocks.length),0];t[1]=parseInt(this.blocks[t[0]].length*Math.random()),this.nextBlock=t,this.blockPosition=JSON.parse(JSON.stringify(this.startPosition)),this.$forceUpdate()},getTrueMap:function(){if(this.map.length!==this.mapSize[0]||this.mapSize[1]!==this.map[0].length)return this.map;for(var t=JSON.parse(JSON.stringify(this.map)),e=this.blocks[this.nowBlock[0]][this.nowBlock[1]],i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)t[i+this.blockPosition[0]][n+this.blockPosition[1]]=Math.max(e[i][n],t[i+this.blockPosition[0]][n+this.blockPosition[1]]);return t}}};e.default=n}}]);