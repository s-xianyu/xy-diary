import{f as F,b as c,j as L,d as N,e as U,U as V,k as E,l as T,o as b,c as A,w as e,i as j,a as o,v as u,x as p,u as a,O as x,s as q,y as z,F as H,D as J,Q as M,B as O,_ as Q}from"./js/index-DtWd1C4G.js";import{_ as R}from"./index.DtzdZ5k8.js";import{u as X}from"./setting.D3WUthCg.js";import"./index.CBkZGbyW.js";const G=F({__name:"fish",setup(K){const{fishInfo:m}=X(),r=uni.createInnerAudioContext(),l=uni.createInnerAudioContext(),g=c(0),y=c([]),_=c(!1),d=c(!1),f=c(),h=c(!1),v=c(!1),C=[{type:"功德",tips:"功德 +1 佛主保佑你"},{type:"抗疫",tips:"阳性 -1 健健康康"}];L(()=>({title:"功德+1"})),N(()=>{setTimeout(()=>{I()},1e3),k(d.value)}),U(()=>{l.pause(),clearInterval(f.value)}),V(()=>{clearInterval(f.value),l.destroy(),r.destroy()});const I=()=>{l.src||(l.sessionCategory="ambient",l.loop=!0,l.src="https://schbrain-static-online.schbrain.com/resources/bgm.mp3"),l.play()},$=()=>l.pause(),B=()=>{r.stop(),r.src||(r.sessionCategory="ambient",r.src="https://admin.daishuyule.cn/agreement/image/sound.mp3"),r.play()},S=n=>{_.value=n,n?$():I()},k=n=>{d.value=n,n?f.value=setInterval(()=>{w()},2e3):clearInterval(f.value)},w=()=>{const n=(m.count??0)+1;h.value=!0,y.value.push({label:C[g.value].tips,index:n}),m.count=n,B()};return(n,s)=>{const t=j,P=O,D=E(T("s-popup"),R);return b(),A(t,{class:"fish"},{default:e(()=>[o(t,{class:"count"},{default:e(()=>[o(t,{class:"count-num"},{default:e(()=>[u(p(a(m).count||0),1)]),_:1}),o(t,{class:"count-label"},{default:e(()=>[u(p(C[a(g)].type),1)]),_:1})]),_:1}),o(t,{class:"box"},{default:e(()=>[x("div",{class:"box-tip"},[(b(!0),q(H,null,z(a(y),i=>(b(),A(t,{key:i.index,class:"box-tip-item"},{default:e(()=>[u(p(i.label),1)]),_:2},1024))),128))]),x("div",{class:J([{active:a(h)},"box-fish"]),onClick:w},[o(P,{src:"https://s21.ax1x.com/2024/08/19/pAPJhXd.png",style:{width:"380rpx",height:"300rpx"}})],2)]),_:1}),o(t,{class:"footer"},{default:e(()=>[o(t,{class:"footer-btn",onClick:s[0]||(s[0]=i=>S(!a(_)))},{default:e(()=>[u(p(a(_)?"取消沉浸":"沉浸模式"),1)]),_:1}),o(t,{class:"footer-btn",onClick:s[1]||(s[1]=i=>k(!a(d)))},{default:e(()=>[u(p(a(d)?"取消自动":"自动敲鱼"),1)]),_:1}),o(t,{class:"footer-btn",onClick:s[2]||(s[2]=i=>v.value=!0)},{default:e(()=>[u("重置")]),_:1})]),_:1}),o(D,{show:a(v),"onUpdate:show":s[3]||(s[3]=i=>M(v)?v.value=i:null),title:"确认清空吗？",onCommit:s[4]||(s[4]=i=>a(m).count=0)},{default:e(()=>[x("div",{class:"message"},"重置后，功德值会清空，请谨慎操作!")]),_:1},8,["show"])]),_:1})}}}),se=Q(G,[["__scopeId","data-v-5ee908c6"]]);export{se as default};
